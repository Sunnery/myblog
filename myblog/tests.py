#coding=utf-8
from qiniu import Auth, put_file, etag
import base64

def qiniuUpload():
  # 需要填写你的 Access Key 和 Secret Key
  access_key = "6Ct_gOzm6X2bo_LQchKhOKMkSMhYmajFJiuPh5oc"
  secret_key = "sbQMnyz96cQnh97uRaTkSqOQj022F0EX8hhuo-n-"

  # 构建鉴权对象
  q = Auth(access_key, secret_key)

  # 要上传的空间
  bucket_name = 'publicpicture'

  # 上传到七牛后保存的文件名
  key = 'test.jpg';

  # 生成上传 Token，可以指定过期时间等
  token = q.upload_token(bucket_name, key, 3600)

  # 要上传文件的本地路径
  localfile = 'test.jpg'

  ret, info = put_file(token, key, localfile)
  print(info)
  assert ret['key'] == key
  assert ret['hash'] == etag(localfile)

def img():
  imgData = b'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'
  with open("imageToSave.png", "wb") as fh:
    fh.write(base64.decodestring(imgData))
    print fh

if __name__ == "__main__":
  import hashlib
  m2 = hashlib.md5()
  m2.update('asdsad')
  print m2.hexdigest()